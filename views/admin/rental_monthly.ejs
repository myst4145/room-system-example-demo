<%- include ('rental/rental_query_form') %>
<div class="row">
  <div class="col-md-3" id="entries-query"></div>
</div>


<div class="entries-d">
  <span class="entries-text">แสดง</span>
  <span class="entries-count"><%= entries.length  %></span>
  <span>รายการ</span>
</div>
<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th style="width: 5%;" class="text-center"> รายการ </th>
        <th style="width: 20%;">เลขที่จอง</th>
        <th style="width: 6%;" class="text-center">คัดลอก</th>
        <th style="width: 15%;">ชื่อ - นามสกุล</th>
        <th style="width: 14%;" class="text-right">ยอดรวม</th>
        <th style="width: 15%;" class="text-right">ค้างชำระ</th>
        <th style="width: 25%;" class="text-center"></th>
      </tr>
    </thead>
    <tbody>
      <% if(entries.length==0) { %>
      <tr>
        <td colspan="8" class="text-center"> ไม่มีข้อมูล </td>
      </tr>
      <%  } %>
      <% for(let i=0;i<entries.length;i++){ %>
      <tr>
        <td class="text-center">
          <%= (paginate.page*paginate.row)+i+1 %>
        </td>
        <td>
          <input type="text" disabled class="form-control-plaintext p-0" id="<%= entries[i].booking_id  %>" value="<%= entries[i].booking_id  %>">
        </td>
        <td class="text-center">
          <div class="position-absolute">
            <p id="rentalMonthlyAlert-<%= entries[i].booking_id %>" class="position-relative  tooltop-alert bg-gradient-dark badge"></p>
          </div>
          <button class="btn bg-gradient-light" onclick="copyData($(`#<%= entries[i].booking_id  %>`), $(`#rentalMonthlyAlert-<%= entries[i].booking_id %>`))">
            <i class="fa-regular fa-copy"></i>
          </button>
        </td>
        <td><%= entries[i].fname +' '+ entries[i].lname   %></td>
        <td class="text-right"><%= entries[i].total_format   %></td>
        <td class="text-right">
          <input type="number" disabled class="form-control-plaintext text-right" data-id="<%= entries[i].booking_id %>" name="booking-overdue" value="<%= entries[i].overdue   %>">
        </td>
        <td>
          <% if( admin_role=='cashier' || data_role.booking_edit) { %>
          <% if(entries[i].status == 'checkin') { %>
          <button class="btn btn-sm bg-gradient-secondary" name="booking-payment" data-act="edit" data-id="<%= entries[i].booking_id  %>">
            <span class="font-weight-bold">ชำระเงิน</span>
          </button>
          <button class="btn btn-sm bg-gradient-success" name="addtime" data-id="<%= entries[i].booking_id  %>">
            <i class="fa-solid fa-plus"></i>
            <strong class="ml-1">เพิ่มเวลา</strong>
          </button>
          <% } %>


          <% if(entries[i].status != 'checkout' && entries[i].status != 'cancel' ) { %>
          <button class="btn btn-sm  bg-gradient-success" name="checkout" data-id="<%= entries[i].booking_id  %>">
            <span class="font-weight-bold">เช็คเอ้าท์</span>
          </button>
          <% } %>
          <%  } %>

        </td>
      </tr>
      <% } %>
    </tbody>
  </table>
</div>


<%- include ('paginateQuery') %>
<%- include('rental/rental_checkout_modal') %>
<%- include ('rental/rental_monthly_detail') %>
<%- include ('rental/rental_monthly_transaction_modal.ejs') %>
<%- include ('rental/rental_addtime_modal') %>

<script src="/js/func/convertCurrentcyThai.js"></script>
<script src="/js/admin/rental/currentTotalCheckout.js"></script>
<script src="/js/admin/rental/rental_checkout.js"></script>
<script src="/js/admin/rental/addtime/rental_addtime.js"></script>
<script src="/js/admin/rental/addtime/rental_addtime_submit.js"></script>
<script src="/js/paginate.js"></script>
<script src="/js/admin/rental/rental.js"></script>
<script src="/js/admin/rental/monthly/bookingPayment.js"></script>
<script src="/js/admin/rental/monthly/payMonthlyByDate.js"></script>
<script src="/js/admin/rental/monthly/rentalMonthlySubmit.js"></script>
<script src="/js/admin/rental/monthly/payMore.js"></script>